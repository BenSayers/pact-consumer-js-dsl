diff --git a/Gruntfile.js b/Gruntfile.js
index 806892e..6573591 100644
--- a/Gruntfile.js
+++ b/Gruntfile.js
@@ -1,37 +1,38 @@
-/*global module */
 module.exports = function (grunt) {
-    
-    grunt.initConfig({
-        pkg: grunt.file.readJSON('package.json'),
-        distDir: "dist",
-        distName: "pact-js-dsl",
-        srcDir: "src",
-        clean: ['<%= dest %>'],
-        concat: {
-            dist: {
-                src: ['<%= srcDir %>/*.js'],
-                dest: '<%= distDir %>/<%= distName %>.js'
 
-            }
-        },
-        karma: {
-            pact: {
-                configFile: 'example/karma.conf.js',
-                singleRun: false
-            }
-        },
-        shell: {
-            pact: {
-                command: 'echo run pact tests; cd ./pact_tests; ./pact.sh 1234',
-                options: {
-                    stdout: true,
-                    failOnError: true
-                }
-            }
-        },
-    });
+  grunt.initConfig({
+    pkg: grunt.file.readJSON('package.json'),
+    distDir: "dist",
+    distName: "pact-js-dsl",
+    srcDir: "src",
+    clean: ['<%= dest %>'],
+    concat: {
+      dist: {
+        src: ['<%= srcDir %>/*.js'],
+        dest: '<%= distDir %>/<%= distName %>.js'
+
+      }
+    },
+    karma: {
+      spec: {
+        configFile: 'karma.conf.js',
+        singleRun: true
+      }
+    },
+    shell: {
+      pact: {
+        command: 'echo run pact tests; cd ./pact_tests; ./pact.sh 1234',
+        options: {
+          stdout: true,
+          failOnError: true
+        }
+      }
+    }
+  });
+
+  require("load-grunt-tasks")(grunt);
+  grunt.registerTask('test', ['shell:pact']);
+  grunt.registerTask('package', ['concat']);
+  grunt.loadNpmTasks('grunt-karma');
 
-    require("load-grunt-tasks")(grunt);
-    grunt.registerTask('test', ['shell:pact']);
-    grunt.registerTask('package', ['concat']);
 };
diff --git a/karma.conf.js b/karma.conf.js
index 9b58fde..3529a10 100644
--- a/karma.conf.js
+++ b/karma.conf.js
@@ -15,6 +15,7 @@ module.exports = function(config) {
 
     // list of files / patterns to load in the browser
     files: [
+        'test-main.js',
         'spec/**/*spec.js'
     ],
 
@@ -55,12 +56,16 @@ module.exports = function(config) {
 
     // start these browsers
     // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher
-    browsers: ['Chrome_without_security'],
+    browsers: ['PhantomJS_without_security'],
 
     customLaunchers: {
       Chrome_without_security: {
         base: 'Chrome',
         flags: ['--disable-web-security']
+      },
+      PhantomJS_without_security: {
+        base: 'PhantomJS',
+        flags: ['--web-security=false']
       }
     },
 
diff --git a/out.txt b/out.txt
deleted file mode 100644
index 2d5e909..0000000
--- a/out.txt
+++ /dev/null
@@ -1,5 +0,0 @@
-rbenv: pact-mock-service: command not found
-
-The `pact-mock-service' command exists in these Ruby versions:
-  1.9.3-p484
-
diff --git a/package.json b/package.json
index 1786aa7..cfd1ea9 100644
--- a/package.json
+++ b/package.json
@@ -6,11 +6,14 @@
   "dependencies": {},
   "devDependencies": {
     "grunt": "0.4.2",
+    "grunt-cli": "*",
     "grunt-contrib-clean": "0.5.0",
     "grunt-contrib-concat": "0.3.0",
     "grunt-contrib-requirejs": "0.3.2",
     "grunt-karma": "0.7.3",
     "grunt-requirejs": "0.4.0",
+
+
     "grunt-shell": "0.6.1",
     "karma": "0.12.0",
     "karma-chrome-launcher": "0.1.2",
@@ -18,7 +21,7 @@
     "karma-safari-launcher": "~0.1",
     "karma-jasmine": "^0.1.5",
     "karma-phantomjs-launcher": "^0.1.4",
-    "karma-requirejs": "0.2.2",
+    "karma-requirejs": "^0.2.2",
     "load-grunt-tasks": "0.4.0"
   },
   "scripts": {},
diff --git a/script/test.sh b/script/test.sh
index b77c478..cfc7660 100755
--- a/script/test.sh
+++ b/script/test.sh
@@ -1,7 +1,7 @@
 bundle exec pact-mock-service -p 1234 -l /tmp/pact.log &
 PACT_PID=$!
 
-sleep 5
+sleep 5 #wip
 
 echo $PACT_PID
 
diff --git a/test-main.js b/test-main.js
new file mode 100644
index 0000000..8c22b93
--- /dev/null
+++ b/test-main.js
@@ -0,0 +1,31 @@
+var allTestFiles = [];
+var TEST_REGEXP = /(spec|test)\.js$/i;
+
+var pathToModule = function(path) {
+  return path.replace(/^\/base\//, '').replace(/\.js$/, '');
+};
+
+Object.keys(window.__karma__.files).forEach(function(file) {
+  if (TEST_REGEXP.test(file)) {
+    // Normalize paths to RequireJS module names.
+    allTestFiles.push(pathToModule(file));
+  }
+});
+
+require.config({
+  // Karma serves files under /base, which is the basePath from your config file
+  baseUrl: '/base',
+
+  // dynamically load all test files
+  deps: allTestFiles,
+
+  // we have to kickoff jasmine, as it is asynchronous
+  callback: window.__karma__.start,
+
+  paths: {
+    'pact-js-dsl':  'dist/pact-js-dsl',
+  },
+  bundles: {
+    'pact-js-dsl':  ['pact', 'interaction', 'mockService']
+  }
+});
